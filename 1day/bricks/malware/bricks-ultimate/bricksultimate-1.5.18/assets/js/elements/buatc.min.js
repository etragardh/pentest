function buAjaxAddToCart(e,t){if("undefined"!=typeof woocommerce_params){const r={};r.product_id=e.dataset?.product_id||0,r.quantity=e.dataset?.quantity||1,r.product_type=e.dataset?.product_type||"simple",jQuery("body").trigger("adding_to_cart",[jQuery(e),r]);var a=woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart");jQuery.ajax({type:"POST",url:a,data:r,dataType:"json",beforeSend:function(){e.classList.remove("added"),e.classList.add("loading")},success:function(t){t.error&&t.product_url?window.location=t.product_url:"undefined"!=typeof wc_add_to_cart_params&&"yes"===wc_add_to_cart_params.cart_redirect_after_add&&wc_add_to_cart_params.cart_url?window.location=wc_add_to_cart_params.cart_url:(t.fragments&&(bricksWooReplaceFragments(t.fragments),jQuery("body").trigger("wc_fragments_refreshed")),t.notices&&"string"==typeof t.notices&&0<t.notices.length&&void 0!==window.bricksWooCommerce.addedToCartNotices&&(window.bricksWooCommerce.addedToCartNotices=t.notices),jQuery("body").trigger("added_to_cart",[t.fragments,t.cart_hash,jQuery(e)]))},error:function(t){t.error&&t.product_url&&(window.location=t.product_url)},complete:function(t){e.classList.remove("loading"),e.classList.add("added")}})}}function ATCUpdateQty(t){var e=t.value,t=t.closest(".brxe-bu-atc");t&&(atcBtn=t.querySelector(".add_to_cart_button")||null)&&atcBtn.setAttribute("data-quantity",e)}function buWooQuantityTriggers(){bricksQuerySelectorAll(document,".action").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();t=this.closest(".quantity").querySelector(".qty");(t&&!(parseFloat(t.value)<=0)||document.querySelector(".grouped_form")&&document.querySelector("li.mnm_item"))&&ATCUpdateQty(t)})}),bricksQuerySelectorAll(document,".brxe-bu-atc .qty").forEach(function(t){let i=1;t.addEventListener("focusin",function(t){i=this.value}),t.addEventListener("change",function(t){var e=this,a=parseFloat(e.value),r=parseFloat(e.getAttribute("step")),o=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max")),d=!1;(isNaN(a)||a<0||a<o||n<a||a%r!=0)&&(d=!0),e.value=d?i:a,ATCUpdateQty(this)})})}function buatcdoajax(n){bricksIsFrontend&&n(".brxe-bu-atc").each(function(){var t=this.getAttribute("data-adtcajax"),e=this.getAttribute("data-redirect")||"",a=JSON.parse(this.getAttribute("data-atc-config"))||"",r=n(this).children(".add_to_cart_button"),o=this.querySelector(".single_add_to_cart_button.alt")||!1;n(document.body).on("added_to_cart",function(){r.hasClass("added")&&a&&r.text(a.addedText)}),o&&void 0!==t&&"yes"==t&&!n(this).hasClass("product-type-external")&&singleAjaxAddToCart(o,n,e)})}document.addEventListener("DOMContentLoaded",t=>{bricksQuerySelectorAll(document,".bu-sticky-button").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),jQuery("html, body").animate({scrollTop:jQuery("form.cart").offset().top-75},750,"swing",function(){const t=e.target.closest(".brxe-bu-off-canvas");t&&t.classList.add("bu-hide-panel")})})}),buWooQuantityTriggers(),window.buWooQuantityTriggers=buWooQuantityTriggers,window.WP_Grid_Builder&&WP_Grid_Builder.on("init",function(t){t.facets.on("appended",function(t){buatcdoajax(jQuery),buWooQuantityTriggers(),bricksWooQuantityTriggersFn&&bricksWooQuantityTriggersFn.run()})})}),jQuery(document).ready(function(t){buatcdoajax(t)}),document.addEventListener("bricks/ajax/end",function(t){"undefined"!=typeof jQuery&&buatcdoajax(jQuery),buWooQuantityTriggers()}),document.addEventListener("bricks/ajax/query_result/displayed",function(t){"undefined"!=typeof jQuery&&buatcdoajax(jQuery),buWooQuantityTriggers()}),document.addEventListener("buAfterGridTable",function(){setTimeout(()=>{"undefined"!=typeof jQuery&&buatcdoajax(jQuery),buWooQuantityTriggers()},100)}),document.addEventListener("buAjaxSearchComplete",function(){"undefined"!=typeof jQuery&&buatcdoajax(jQuery),buWooQuantityTriggers(),bricksQuerySelectorAll(document,".ajax_add_to_cart").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),buAjaxAddToCart(e,"loop")})})});