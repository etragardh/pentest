#!/usr/bin/env python3

import requests

breakdance_data = '{"tree_json_string":"{\"root\":{\"id\":1,\"data\":{\"type\":\"root\",\"properties\":{}},\"children\":[{\"id\":100,\"data\":{\"type\":\"EssentialElements\\\\Section\",\"properties\":null},\"children\":[{\"id\":101,\"data\":{\"type\":\"EssentialElements\\\\CodeBlock\",\"properties\":{\"content\":{\"content\":{\"php_code\":\"<?php echo \\\"this is a test\\\"; ?>\"}}}},\"children\":[],\"_parentId\":100}],\"_parentId\":1}]},\"_nextNodeId\":102,\"status\":\"exported\"}"}'

cookies = {
    'wordpress_test_cookie': 'WP%20Cookie%20check',
    'wordpress_logged_in_86a9106ae65537651a8e456835b316ab': 'emil%7C1715726068%7CxfudKaJJl3rkFgae3Cz79nZOCPsleODB0rkm8QdJV1C%7Cc39842fa4e561665513c91ae9f1ca8d825477fc28aebac14559fd1566f53dc64',
    'PHPSESSID': '5d8cc7d3b5c49a842fc7012ce2c6aaec',
    'breakdance_session_count': '1',
    'breakdance_last_session_id': '5d8cc7d3b5c49a842fc7012ce2c6aaec',
    'phpMyAdmin': '9b09737823ffa815969dafea29d16f8f',
    'pma_lang': 'sv',
    'breakdance_view_count': '6',
    'wp-settings-time-1': '1715556091',
}

headers = {
    'Accept': 'application/json, */*;q=0.1',
    'Accept-Language': 'sv-SE,sv;q=0.9,en-US;q=0.8,en;q=0.7',
    'Cache-Control': 'no-cache',
    'Connection': 'keep-alive',
    'Content-Type': 'application/json',
    # 'Cookie': 'wordpress_test_cookie=WP%20Cookie%20check; wordpress_logged_in_86a9106ae65537651a8e456835b316ab=emil%7C1715726068%7CxfudKaJJl3rkFgae3Cz79nZOCPsleODB0rkm8QdJV1C%7Cc39842fa4e561665513c91ae9f1ca8d825477fc28aebac14559fd1566f53dc64; PHPSESSID=5d8cc7d3b5c49a842fc7012ce2c6aaec; breakdance_session_count=1; breakdance_last_session_id=5d8cc7d3b5c49a842fc7012ce2c6aaec; phpMyAdmin=9b09737823ffa815969dafea29d16f8f; pma_lang=sv; breakdance_view_count=6; wp-settings-time-1=1715556091',
    'Origin': 'http://localhost',
    'Pragma': 'no-cache',
    'Referer': 'http://localhost/wp-admin/post.php?post=20&action=edit',
    'Sec-Fetch-Dest': 'empty',
    'Sec-Fetch-Mode': 'cors',
    'Sec-Fetch-Site': 'same-origin',
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36',
    'X-HTTP-Method-Override': 'PUT',
    'X-WP-Nonce': '024c74840a',
    'sec-ch-ua': '"Google Chrome";v="123", "Not:A-Brand";v="8", "Chromium";v="123"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"macOS"',
}

params = {
    '_locale': 'user',
}

json_data = {
    'id': 20,
    'title': 'adw2',
    'content': '',
    'meta': {
        'breakdance_data': breakdance_data
    }
}

response = requests.post('http://localhost/wp-json/wp/v2/posts/20', params=params, cookies=cookies, headers=headers, json=json_data)

if response.status_code == 200:
    print(response.text)
    print("Success =)")
else:
    print(response.text)
    print("Error :/", response.status_code)

# Note: json_data will not be serialized by requests
# exactly as it was in the original request.
#data = '{"id":20,"title":"adw2","content":""}'
#response = requests.post('http://localhost/wp-json/wp/v2/posts/20', params=params, cookies=cookies, headers=headers, data=data)
