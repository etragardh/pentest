function buWishlist(){bricksQuerySelectorAll(document,".brxe-bu-atwsl").forEach(function(t){var e=JSON.parse(t.getAttribute("data-wsl-config"))||!1;e&&e.content&&tippy(t,{appendTo:t,content:"add"==e.action?e.content:e.addedContent,maxWidth:"none",interactive:!0,animation:e.animation,placement:e.placement,arrow:!0}),t.addEventListener("click",doWishlist)})}function doWishlist(t){t.preventDefault();let e=t.currentTarget,s=e.querySelector(".wishlist-action");(config=JSON.parse(e.getAttribute("data-wsl-config"))||!1)&&(s.classList.add("adding"),fetch(bricksData.ajaxUrl.toString(),{method:"POST",body:"action=bu_get_wishlist&security="+interactionParams.wsl_nonce+"&cookieKey="+config.cookie_key+"&wslaction="+config.action+"&productId="+config.product+"&postType="+config.postType+"&notice="+(config.notify||0),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}).then(function(t){if(200!==t.status)throw console.log("Status Code: "+t.status),s.classList.remove("adding"),t;return t.json()}).then(function(o){if(o.success){s.classList.remove("adding");let t=".bu-wsl-counter-btn--"+config.postType+" .bu-wsl-counter",e=document.querySelectorAll(t)||!1,n=document.querySelectorAll(".hide-empty-wsl-counter")||!1,i=document.querySelectorAll(".bu-wsl-hide-counter-btn--"+config.postType)||!1;"add"==config.action?(document.querySelectorAll(".wishlist-item-"+config.product).forEach(t=>{t.classList.add("added","action-remove"),t.classList.remove("action-add");const e=t.querySelector(".wishlist-text")||!1;config.removeText&&e&&(e.innerText=config.removeText),config.action="remove",t.closest(".brxe-bu-atwsl").setAttribute("data-wsl-config",JSON.stringify(config))}),config.notify&&Notify(o.notice,null,null,"info")):"remove"==config.action&&document.querySelectorAll(".wishlist-item-"+config.product).forEach(t=>{t.classList.remove("added","action-remove"),t.classList.add("action-add");const e=t.querySelector(".wishlist-text")||!1;config.addText&&e&&(e.innerText=config.addText),config.action="add",t.closest(".brxe-bu-atwsl").setAttribute("data-wsl-config",JSON.stringify(config))}),e&&e.forEach(t=>{t.innerText=o.count}),n&&n.forEach(t=>{0<o.count?t.classList.remove("bu-wsl-counter-hide-counter"):t.classList.add("bu-wsl-counter-hide-counter")}),i&&i.forEach(t=>{0<o.count?t.classList.remove("bu-wsl-hide-btn"):t.classList.add("bu-wsl-hide-btn")}),document.dispatchEvent(new Event("buwoo_update_wishlist"))}}))}document.addEventListener("DOMContentLoaded",t=>{bricksIsFrontend&&(buWishlist(),window.buWishlist=buWishlist,window.WP_Grid_Builder&&WP_Grid_Builder.on("init",function(t){t.facets.on("appended",function(t){buWishlist()})}))}),document.addEventListener("bricks/ajax/end",function(t){buWishlist()}),document.addEventListener("bricks/ajax/query_result/displayed",function(t){buWishlist()}),document.addEventListener("buAjaxSearchComplete",function(t){buWishlist()}),document.addEventListener("buAfterGridTable",function(){setTimeout(()=>{buWishlist()},100)}),document.addEventListener("buwoo_update_wishlist",function(){document.querySelectorAll(".bu-mini-wishlist").forEach(t=>{fetch(bricksData.ajaxUrl.toString(),{method:"POST",body:"action=bu_mini_wishlist&security="+interactionParams.wsl_nonce+"&element="+t.getAttribute("data-element-id")+"&post="+t.getAttribute("data-post-id"),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}).then(function(t){if(200!==t.status)throw console.log("Status Code: "+t.status),actionEl.classList.remove("adding"),t;return t.json()}).then(function(e){if(e.fragments){const t=Object.keys(e.fragments).map(t=>[t,e.fragments[t]]);t.forEach(function(e,t,n){document.querySelectorAll(e[0]).forEach(t=>{t.innerHTML=e[1]})})}document.dispatchEvent(new Event("buwoo_update_mini_wishlist"))})})});