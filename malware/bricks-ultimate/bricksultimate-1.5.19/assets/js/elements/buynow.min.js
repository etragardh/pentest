function buBuyNow(){const t=document.querySelectorAll(".brxe-bu-buy-now");0<t.length&&t.forEach(t=>{doBuyNow(t)})}document.addEventListener("DOMContentLoaded",function(){buBuyNow(),window.WP_Grid_Builder&&WP_Grid_Builder.on("init",function(t){t.facets.on("appended",function(t){buBuyNow()})})});let doBuyNow=t=>{let a=t.getAttribute("data-keep-cart"),e=t.getAttribute("data-in-loop");if("no"==e){const n=document.querySelectorAll(".variations_form");if(0<n.length){let t="mouseover";("ontouchstart"in window||window.navigator.msPointerEnabled||"ontouchstart"in document.documentElement)&&(t="touchstart"),n.forEach(n=>{n.addEventListener(t,function(t){var e=n.getAttribute("data-append-fields");void 0!==e&&"yes"==e&&(n.querySelector(".bu-buy-now-inp").remove(),n.querySelector(".bu-kp-cart-inp").remove(),n.querySelector(".bu-rd-url-inp").remove(),n.removeAttribute("data-append-fields"))})})}t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();let u=this.getAttribute("data-product_id"),e=t.target.closest(".brxe-loop-builder-on");const n=(e||document).querySelectorAll(".cart");0<n.length&&n.forEach(i=>{let t=i.querySelector(".single_add_to_cart_button"),e=i.getAttribute("data-append-fields"),n=i.hasAttribute("data-product_id")?i.getAttribute("data-product_id"):t.getAttribute("value");if(t&&t.classList.contains("disabled"))t.classList.contains("wc-variation-is-unavailable")?window.alert(wc_add_to_cart_variation_params.i18n_unavailable_text):t.classList.contains("wc-variation-selection-needed")&&window.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text);else if(parseInt(u)==parseInt(n)){if(!e||"yes"!=e){let t=document.createElement("input"),e=(t.setAttribute("type","hidden"),t.setAttribute("name","bu_buy_now"),t.setAttribute("value","yes"),t.setAttribute("class","bu-buy-now-inp"),i.appendChild(t),document.createElement("input")),n=(e.setAttribute("type","hidden"),e.setAttribute("name","keep_cart_items"),e.setAttribute("value",a),e.setAttribute("class","bu-kp-cart-inp"),i.appendChild(e),document.createElement("input"));if(n.setAttribute("type","hidden"),n.setAttribute("name","bu_redirect_url"),n.setAttribute("value",this.getAttribute("href")),n.setAttribute("class","bu-rd-url-inp"),i.appendChild(n),!1===i.classList.contains("variations_form")){let t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","product_id"),t.setAttribute("value",u),t.setAttribute("class","bu-prd-inp"),i.appendChild(t)}i.setAttribute("data-append-fields","yes")}i.submit()}})})}};document.addEventListener("bricks/ajax/end",function(t){buBuyNow()}),document.addEventListener("bricks/ajax/query_result/displayed",function(t){buBuyNow()}),document.addEventListener("buAjaxSearchComplete",function(){buBuyNow()}),document.addEventListener("buwoo_update_mini_wishlist",function(){buBuyNow()}),document.addEventListener("buAfterGridTable",function(){setTimeout(()=>{buBuyNow()},100)});