function buSwatchesOnLoop(){bricksIsFrontend&&(jQuery(document).on("click",".swatch-on-loop",changeProductImage),jQuery(document).on("click",".bu-swatches-divider",buShowHiddenSwatches),jQuery(document).on("click",".quick-add-btn .add_to_cart_button",buShowQucikAddForm),jQuery(document).on("click",".qa-close-btn",closeQuickAddForm))}function closeQuickAddForm(t){t.preventDefault();var a=jQuery(this).parents(".brxe-loop-builder-on");a.removeClass("quick-add-open"),a.on("transitionend",function(){a.hasClass("quick-add-open")||a.removeClass("wrapper-overflow-hidden")})}function buShowQucikAddForm(t){t.preventDefault();var t=jQuery(this),a=t.parents(".brxe-loop-builder-on").first(),e=a.find(".quick-add-wrapper"),t=t.data("product_id");a.hasClass("qa-from-loaded")?a.addClass("quick-add-open wrapper-overflow-hidden"):(a.addClass("bu-loading-qa-form"),jQuery.ajax({url:bricksData.ajaxUrl.toString(),data:{action:"bu_load_variation_form",id:t,security:interactionParams.atc_nonce},method:"post",success:function(t){e.find(".qa-cart-form").html(t),a.find(".variations_form").wc_variation_form().find(".variations select:eq(0)").change(),a.find(".variations_form").trigger("wc_variation_form"),buSwatches(),buSwatchesTooltip(),singleAjaxAddToCart(a.find(".variations_form .single_add_to_cart_button.alt")[0],jQuery,"")},complete:function(){setTimeout(function(){a.removeClass("bu-loading-qa-form"),a.addClass("quick-add-open qa-from-loaded wrapper-overflow-hidden")},100)}}),jQuery(document.body).on("added_to_cart",function(){a.removeClass("quick-add-open qa-from-loaded"),a.on("transitionend",function(){a.hasClass("quick-add-open")||a.removeClass("wrapper-overflow-hidden")})}))}function buShowHiddenSwatches(){jQuery(this).closest(".swatches-select").find(".bu-swatch").removeClass("bu-swatch-hidden"),jQuery(this).addClass("bu-show-all-swatches")}function changeProductImage(t){t.preventDefault();var a,e,s,i,o,r,t=jQuery(this),c=t.data("image-src"),d=t.data("image-srcset"),n=t.data("image-sizes"),u=t.closest(".brxe-bu-swatches-loop"),l=t.closest(".brxe-loop-builder-on");u.hasClass("bu-no-image-update")||void 0!==c&&""!==c&&(a=(u=l.find(".brxe-bu-product-image > a > img, .brxe-bu-product-image > img, .brxe-image, .brxe-image > a > img, .brxe-image > img")).attr("data-original-src"),o=u.attr("data-original-srcset"),r=u.attr("data-original-sizes"),void 0===a&&u.attr("data-original-src",u.attr("src")),void 0===o&&u.attr("data-original-srcset",u.attr("srcset")),void 0===r&&u.attr("data-original-sizes",u.attr("sizes")),t.hasClass("active-swatch")?(e=a,s=o,i=r,t.removeClass("active-swatch"),l.removeClass("variation-selected"),l.find(".quick-add-btn")&&(a=l.find(".quick-add-btn .product_type_variable").attr("data-org-text")||!1)&&(l.find(".quick-add-btn .product_type_variable span").text(a),l.find(".quick-add-btn .product_type_variable").removeAttr("data-org-text"))):(t.parent().find(".active-swatch").removeClass("active-swatch"),t.addClass("active-swatch"),l.addClass("variation-selected"),e=c,s=d,i=n,l.find(".quick-add-btn")&&(o=l.find(".quick-add-btn").attr("data-atc-text")||!1)&&(r=l.find(".quick-add-btn .product_type_variable span").text(),l.find(".quick-add-btn .product_type_variable").attr("data-org-text",r),l.find(".quick-add-btn .product_type_variable span").text(o))),u.attr("src")!==e&&(l.addClass("loading-swatch-image"),u.attr("src",e).attr("srcset",s).attr("image_sizes",i).one("load",function(){l.removeClass("loading-swatch-image")})))}function buSwatchesTooltip(){bricksIsFrontend&&bricksQuerySelectorAll(document,".bu-swatch").forEach(function(t){let a=t.closest(".brxe-product-add-to-cart")||t.closest(".brxe-bu-atc")||t.closest(".brxe-bu-swatches-loop")||!1;var e,s;a&&(e=!!(e=a.getAttribute("data-tooltip-config")||!1)&&JSON.parse(e))&&"yes"==e.hasTooltip&&(s=t.getAttribute("data-title")||!1)&&tippy(t,{appendTo:t,content:s,maxWidth:"none",interactive:!0,animation:e.animation,placement:e.placement,arrow:!0})})}function buSwatches(){if(bricksIsFrontend){let t=document.querySelectorAll(".variations_form")||!1;var o;t&&(t.forEach(i=>{let t=i.querySelector("label")||!1,a=i.closest(".brxe-product-add-to-cart")||i.closest(".brxe-bu-atc")||!1,s=!1;var e;a&&(e=a.getAttribute("data-price-update")||!1,s=!!e&&JSON.parse(e)),t&&t.addEventListener("click",t=>{jQuery(this).siblings(".value").hasClass("with-swatches")&&t.preventDefault()}),jQuery(i).attr("data-swatches")||(i.setAttribute("data-swatches",!0),jQuery(i).data("product_variations")||jQuery(i).find(".swatches-select").find("> div").addClass("swatch-enabled"),jQuery(".bu-swatches > .bu-swatch").hasClass("active-swatch")&&i.classList.add("variation-swatch-selected"),jQuery(i).on("click",".bu-swatches > .bu-swatch",function(){var t=jQuery(this),a=t.data("value"),e=t.parent().data("id"),s=t.data("title");o(jQuery(i)),t.hasClass("active-swatch")||t.hasClass("swatch-disabled")||(jQuery(i).find("select#"+e).val(a).trigger("change"),t.parent().find(".active-swatch").removeClass("active-swatch"),t.addClass("active-swatch"),o(jQuery(i)),"yes"===t.closest(".swatches-is-on").data("show-label")&&t.parents("tr").find(".bu-swatch-selected").html(s))}).on("woocommerce_update_variation_values",function(){o(jQuery(i))}).on("click",".reset_variations",function(t){jQuery(i).find(".active-swatch").removeClass("active-swatch"),"yes"===jQuery(this).closest(".swatches-is-on").data("show-label")&&jQuery(i).find(".bu-swatch-selected").html("")}).on("reset_data",function(){if(s&&"yes"==s.updatePrice){const a=jQuery(s.selector)||!1;var t;a&&void 0!==a.attr("data-o_content")&&(t=JSON.parse(a.attr("data-o_content")),a.html(t.price_html),a.removeAttr("data-o_content"))}}).on("show_variation",function(t,a){if("yes"===jQuery(i).closest(".swatches-is-on").data("show-label")&&jQuery(i).find(".active-swatch").each(function(){var t=jQuery(this),a=t.data("title");t.parents("tr").find(".bu-swatch-selected").html(a)}),s&&"yes"==s.updatePrice){const e=jQuery(s.selector)||!1;e&&void 0===e.attr("data-o_content")&&e.attr("data-o_content",JSON.stringify({price_html:e.html()})),e.html(jQuery.parseHTML(a.price_html)[0]),jQuery(i).find(".woocommerce-variation-price").hide()}a.image.src}))}),o=function(t){t.data("product_variations")&&t.find(".variations select").each(function(){var t=jQuery(this),a=t.parent().find(".swatches-select"),t=t.html(),t=jQuery(t);a.find("> div").removeClass("swatch-enabled").addClass("swatch-disabled"),t.each(function(){var t=jQuery(this).val();jQuery(this).hasClass("enabled")?a.find('div[data-value="'+t+'"]').removeClass("swatch-disabled").addClass("swatch-enabled"):a.find('div[data-value="'+t+'"]').addClass("swatch-disabled").removeClass("swatch-enabled")})})})}}document.addEventListener("DOMContentLoaded",function(){buSwatches(),buSwatchesTooltip(),buSwatchesOnLoop(),window.buSwatches=buSwatches,window.buSwatchesTooltip=buSwatchesTooltip,window.buSwatchesOnLoop=buSwatchesOnLoop,window.WP_Grid_Builder&&WP_Grid_Builder.on("init",function(t){t.facets.on("appended",function(t){buSwatches(),buSwatchesTooltip()})})}),document.addEventListener("bricks/ajax/end",function(t){buSwatches(),buSwatchesTooltip()}),document.addEventListener("bricks/ajax/query_result/displayed",function(t){buSwatches(),buSwatchesTooltip()}),document.addEventListener("buAjaxSearchComplete",function(t){buSwatches(),buSwatchesTooltip()}),document.addEventListener("buAfterGridTable",function(){setTimeout(()=>{buSwatches(),buSwatchesTooltip()},100)});