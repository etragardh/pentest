document.addEventListener('DOMContentLoaded', function() {
    const inputFileEl       = document.getElementById('input-company-logo-image');
    const inputDeleteFileEl = document.getElementById('delete-company-logo-image');
    const logoPreviewEl     = document.getElementById('imagePreview');
    const addLogoEl         = document.querySelector('.company-add-logo');
    const deleteLogoEl      = document.querySelector('.company-delete-logo');

    if (addLogoEl) {
        addLogoEl.addEventListener('click', function(e) {
            e.preventDefault();
            const mediaUploader = wp.media({
                title:    'Chose image',
                multiple: false,
            });

            mediaUploader.on('select', function() {
                const attachment = mediaUploader.state().get('selection').first().toJSON();
                const imageEl    = new Image();

                imageEl.src         = attachment.url;
                imageEl.style.width = '200px';

                logoPreviewEl.innerHTML = '';
                logoPreviewEl.appendChild(imageEl);

                addLogoEl.style.display    = 'none';
                deleteLogoEl.style.display = 'flex';

                inputFileEl.value = attachment.url;
            });

            mediaUploader.open();
        });
    }

    if (deleteLogoEl) {
        deleteLogoEl.addEventListener('click', function() {
            const IMAGE_PREVIEW_EL     = document.getElementById('imagePreview');
            IMAGE_PREVIEW_EL.innerHTML = '';

            addLogoEl.style.display    = 'flex';
            inputDeleteFileEl.checked  = true;
            deleteLogoEl.style.display = 'none';
            inputFileEl.value          = '';
        });
    }
});
