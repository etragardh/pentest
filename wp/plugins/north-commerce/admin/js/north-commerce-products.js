document.addEventListener('DOMContentLoaded', function() {

	const productsList = document.querySelector('.products__board .result__products')

	setProductItemClickListener()

	function setProductItemClickListener() {
		if (!productsList) {
			return
		}

		productsList.addEventListener('click', handleProductItemClick)
	}

	function handleProductItemClick(e) {
		if (
			'A' === e.target.tagName
			|| e.target.closest('a')
			|| e.target.closest('.product__select')
		) {
			return
		}

		const productItem = e.target.closest('[data-product-id]')

		if (!productItem) {
			return
		}

		const permalink = productItem.dataset.productUrl

		if (!permalink) {
			return
		}

		window.location.href = permalink
	}

})
