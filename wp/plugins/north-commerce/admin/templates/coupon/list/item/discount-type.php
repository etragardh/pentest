<?php

defined( 'ABSPATH' ) || exit;

use NorthCommerce\Db\Collections\CouponDiscountTypes as DiscountTypes;
use North_Commerce_Settings as Settings;

/**
 * Coupon discount type cell.
 *
 *
 * @package north-commerce/admin/templates/coupon
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com/
 * @since   0.1.21
 * @version 0.1.21
 */


$type_slug = $coupon['coupon_discount_type']['slug'] ?? '';
$type_slug_cs = nc_camel_case( $type_slug );
$dt = DiscountTypes::$type_slug_cs();

$description = '';
if ( 'fixed' === $dt->slug ) {
    $discount_amount = floatval( $coupon['discount_amount'] );
    $discount_amount = Settings::formatted_price( $coupon['discount_amount'], false );
    $description .= ' / ' . $discount_amount . ' ' . esc_html__( 'Off', 'north-commerce' );
}
if ( 'percent' === $dt->slug ) {
    $description .= ' / ' . floatval( $coupon['discount_amount'] ) . '% ' . esc_html__( 'Off', 'north-commerce' );
}

?>
<div class="col result-col-2 item__discount_type">
    <span>
        <?php
        echo esc_html( $dt->name . $description );
        ?>
    </span>
</div>