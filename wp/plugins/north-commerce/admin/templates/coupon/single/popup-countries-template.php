<?php

defined( 'ABSPATH' ) || exit;

use NorthCommerce\Models\CountryModel;

/**
 * Countries modal window
 *
 *
 * @package north-commerce/admin/templates/coupon/single
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com/
 * @since   0.1.21
 * @version 0.1.24
 */

$country_class = new CountryModel();

?>
<div class="nc-custom-popup" id="countries-modal">
	<form
		class="popup-new-countries admin-popup nc-custom-popup__window">
		<div class="admin-popup__header">
			<div class="admin-popup__left-side">
				<h3 class="integration-popup-name">
					<?php esc_html_e( 'Countries List', 'north-commerce' ); ?>
				</h3>
				<div class="loader"></div>
			</div>
			<a href="javascript:void(0);" data-nc-custom-popup-close class="admin-popup__close"></a>
		</div>

		<div class="admin-popup__body">

			<div class="admin-popup__notice"></div>

			<div class="admin-popup__content">

				<div class="search-input-wrapper">
					<input
						type="text"
						name="country-filter-name"
						class="search-input country-filter-name"
						id="country-filter-name"
						placeholder="<?php esc_attr_e( 'Filter by country name', 'north-commerce' ); ?>"
					>
					<label for="country-filter-name" class="search-icon">
					</label>
				</div>

				<div class="empty-list hide">
					<?php esc_html_e( 'No results for: ', 'north-commerce' ); ?>
					<span class="search-query"></span>
				</div>

				<div class="popup-list popup-countries-list">
					<?php

					$countries_list = $country_class->get_formated_list();
					foreach ( $countries_list as $country_code => $country_name ) {
						?>
						<div
							class="list__country <?php echo esc_attr( 'country-' . $country_code ); ?>"
							data-level="country"
							data-country-slug="<?php echo esc_attr( $country_code ); ?>"
						>
							<div class="country__wrapper">
								<div class="country__checkbox">
									<input
										type="checkbox"
										class="north-checkbox__handler"
										name="applied_countries[]"
										id="<?php echo esc_attr( 'country-' . $country_code ); ?>"
										value="<?php echo esc_attr( $country_code ); ?>"
										<?php checked( isset( $applied_countries[ $country_code ] ) ); ?>
									>
									<label
										for="<?php echo esc_attr( 'country-' . $country_code ); ?>"
										class="north-checkbox"
									>
									</label>
								</div>
								<label
									for="<?php echo esc_attr( 'country-' . $country_code ); ?>"
									class="country__label"
								>
									<?php echo esc_html( $country_name ); ?>
								</label>
							</div>
						</div>
						<?php
					}

					?>
					<div class="loader-wrap">
						<div class="loader"></div>
					</div>
				</div>

				<div class="admin-popup__actions">
					<a href="javascript:void(0);" data-nc-custom-popup-close class="btn btn--cancel admin-popup-cancel">
						<?php esc_html_e( 'Cancel', 'north-commerce' ); ?>
					</a>
					<input
						type="submit"
						class="btn btn--submit admin-popup-submit disabled"
						value="<?php esc_attr_e( 'Update specific countries', 'north-commerce' ); ?>"
					>
				</div>

			</div>

		</div>
	</form>
</div>
