<?php

defined( 'ABSPATH' ) || exit;

/**
 * Applied countries section
 *
 *
 * @package north-commerce/admin/templates/coupon/single
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com/
 * @since   0.1.21
 * @version 0.1.21
 */

?>
<h3>
    <?php esc_html_e( 'Applied Countries', 'north-commerce' ); ?>
</h3>

<label class="radio-container">
    <?php esc_html_e( 'Any country', 'north-commerce' ); ?>
    <input
        type="radio"
        name="coupon_countries"
        id="coupon_countries_any"
        value="countries_any"
        <?php checked( $coupon_any_country ); ?>
    >
    <span class="checkmark"></span>
</label>

<label class="radio-container">
    <?php esc_html_e( 'Specific countries', 'north-commerce' ); ?>
    <input
        type="radio"
        name="coupon_countries"
        id="coupon_countries_specific"
        value="countries_specific"
        <?php checked( ! $coupon_any_country ); ?>
    >
    <span class="checkmark"></span>
</label>
<?php

$class_active = ! $coupon_any_country ? ' active' : '';

?>
<div class="applied-list applied-countries-list<?php echo esc_attr( $class_active ); ?>">
    <button
        type="button"
        class="add-button applied-list__button"
        data-nc-custom-popup="#countries-modal"
    >
	    <span class="add-button__icon"></span>
		<span class="add-button__label">
		    <?php esc_html_e( 'Add countries', 'north-commerce' ); ?>
	    </span>
	</button>
    <div class="selected-list list-countries">
        <?php

        foreach ( $applied_countries ?? [] as $country ) {
            $country = $country['country'];
            ?>
            <div class="country__wrapper" data-country-slug="<?php echo esc_attr( $country['abbreviation'] ); ?>">
                <div class="country__label">
                    <?php echo esc_html( $country['name'] ); ?>
                </div>
                <button class="country__delete list__item-delete">
                </button>
            </div>
            <?php
        }

        ?>
        <div class="loader-wrap">
			<div class="loader"></div>
		</div>
    </div>
</div>

<script type="text/template" id="nc-tmpl-country-item">
    <div class="country__wrapper" data-country-slug="">
        <div class="country__label"></div>
        <button class="country__delete list__item-delete"></button>
    </div>
</script>