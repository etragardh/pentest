<?php

defined( 'ABSPATH' ) || exit;

/**
 * Generated variant template
 *
 * @package north-commerce/admin/templates
 * @author  North Plugins <hello@northcommerce.com=>
 * @link    https://northcommerce.com/
 * @since   0.1.12
 * @version 0.1.24
 */


if ( isset( $variant['id'] ) ) {
	$product_model = new NorthCommerce\Models\ProductModel();
	$pvovs = $product_model->list_option_values_by_variant_id( $variant['id'] );

	$signature = implode( ':', array_map( function( $pvov ) {
		return $pvov['product_option_value_id'];
	}, $pvovs ) );

	$title = implode( ', ', array_map( function( $pvov ) {
		return $pvov['product_option_value']['display_value'];
	}, $pvovs ) );
}

$extra_class = ! empty( $class ) ? ' ' . $class : '';

?>
<div
	class="variant<?php echo esc_attr( $extra_class ); ?>"
	data-id="<?php echo esc_attr( $variant['id'] ?? '' ); ?>"
	data-signature="<?php echo esc_attr( $signature ?? '' ); ?>"
>
	<div class="variant__name result-col-3">
		<label class="variant-enabled-label">
			<input
				class="variant-visible"
				type="checkbox"
				<?php checked( $variant['visible'] ?? false ); ?>
			>
			<img
				class="variant-enabled-logo"
				src="<?php echo esc_url( NORTH_COMMERCE_PLUGIN_DIR_URL . 'admin/images/preview.svg' ); ?>"
			>
		</label>

		<div class="variant__image<?php echo ! empty( $variant['image_url'] ) ? ' active' : ''; ?>">
			<div class="image__wrapper">
				<div class="image__content">
					<div class="image__variant">
						<img src="<?php echo $variant['image_url'] ?? ''; ?>" alt="">
						<div class="image__overlay">
							<a
								href="javascript:void(0);"
								class="variant-image__remove"
							></a>
						</div>
					</div>
					<div class="image__add">
						<a
							href="javascript:void(0);"
							class="image-add-btn load-media-variant"
						>
							<p>
								<?php esc_html_e( 'Add image', 'north-commerce' ); ?>
							</p>
						</a>
					</div>
				</div>
			</div>
		</div>

		<p class="variant__title">
			<?php echo wp_unslash( $title ?? '' ); ?>
		</p>
	</div>

	<div class="variant__price result-col-2">
		<div class="currency-wrapper">
			<span class="currency-symbol">
				<?php echo North_Commerce_Settings::get_currency_symbol(); ?>
			</span>
			<input
				type="number"
				class="variant-price"
				placeholder="0.00"
				min="0"
				step="0.01"
				value="<?php echo esc_attr( $variant['price'] ?? ''); ?>"
			>
		</div>
	</div>

	<div class="variant__sku result-col-2">
		<input
			type="text"
			class="variant-sku"
			value="<?php echo esc_attr( $variant['sku'] ?? '' ); ?>"
		>
	</div>

	<div class="variant__inventory result-col-2">
		<input
			type="number"
			class="variant-quantity"
			min="0"
			value="<?php echo esc_attr( $variant['quantity'] ?? '' ); ?>"
		>
	</div>
</div>
