<?php

defined( 'ABSPATH' ) || exit;

/**
 * @package north-commerce/admin/templates/shipment/popups
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com/
 * @since   0.1.0
 * @version 0.1.24
 */

$profile_model = new NorthCommerce\Models\ShippingProfileModel();
$country_model = new NorthCommerce\Models\CountryModel();

$warehouse_country = North_Commerce_Settings::get_warehouse_country();
$countries_subunits_map  = nc_get_countries_subunits_map();


?>
<form class="popup-create-shipment-address address-popup admin-popup">
	<div class="admin-popup__header">
		<div class="admin-popup__left-side">
			<h3 class="integration-popup-name">
				<?php esc_html_e( 'Add Shipment Address', 'north-commerce' ); ?>
			</h3>
			<div class="loader"></div>
		</div>
		<a
			href="javascript:void(0);"
			class="admin-popup__close"
			data-fancybox-close
		></a>
	</div>

	<div class="admin-popup__body">
		<input
			type="hidden"
			id="countries-subunits-map"
			value="<?php echo htmlspecialchars( json_encode( nc_get_countries_subunits_map() ), ENT_QUOTES, 'UTF-8' ); ?>"
		>

		<input type="hidden" id="list_states_by_countries"
           	value="<?php echo htmlspecialchars( json_encode( $countries_subunits_map ), ENT_QUOTES, 'UTF-8' ); ?>">

		<div class="admin-popup__notice"></div>

		<div class="admin-popup__content">
			<div class="add-address-container">
				<div class="admin-popup-field-new">
					<label for="add_address_country" class="admin-popup-field-new__label">
						<?php esc_html_e( 'Country', 'north-commerce' ); ?>
					</label>

					<select name="address_country" id="add_address_country" class="admin-popup-field-new__input">
						<?php
						foreach ( $country_model->get_formated_list() as $country_code => $country_name ) {
							?>
							<option
								value="<?php echo esc_attr( $country_code ) ?>"
								<?php if ($warehouse_country === $country_code) echo 'selected="selected"'; ?>
							>
								<?php echo esc_html( $country_name ) ?>
							</option>
							<?php
						}
						?>
					</select>
				</div>

				<div class="admin-popup-field-new" data-shipment-address-create-container>
					<label for="add_shipping_address" class="admin-popup-field-new__label shipping-profile-create-address1">
						<?php esc_html_e( 'Address Line', 'north-commerce' ); ?>
					</label>
					<input
						type="text"
						name="shipping_address"
						id="add_shipping_address"
						class="admin-popup-field-new__input"
						value=""
					>
				</div>

				<div class="admin-popup-field-new" data-shipment-city-create-container>
					<label for="add_address_city" class="admin-popup-field-new__label shipping-profile-create-city">
						<?php esc_html_e( 'City', 'north-commerce' ); ?>
					</label>
					<input
						type="text"
						name="address_city"
						id="add_address_city"
						value=""
						class="admin-popup-field-new__input"
						>
				</div>

				<div class="admin-popup-field-new__group">
					<div
						class="admin-popup-field-new admin-popup-field-new--half"
						id="select_input_wrapper"
						data-shipment-state-create-container
					>
						<label
							for="add_address_state_select"
							class="admin-popup-field-new__label shipping-profile-create-state"
						>
							<?php esc_html_e( 'State', 'north-commerce' ); ?>
						</label>
						<select
							name="address_state"
							id="add_address_state_select"
							class="admin-popup-field-new__input"
						>
						</select>
					</div>
					<div
						class="admin-popup-field-new admin-popup-field-new--half"
						data-shipment-zipcode-create-container
					>
						<label
							for="add_address_zipcode"
							class="admin-popup-field-new__label shipping-profile-create-zipcode"
						>
							<?php esc_html_e( 'Zip Code', 'north-commerce' ); ?>
						</label>
						<input
							type="text"
							name="address_zipcode"
							id="add_address_zipcode"
							class="admin-popup-field-new__input"
							value=""
						>
					</div>
				</div>
			</div><?php // add-address-container ?>
		</div>

		<div class="admin-popup__actions">
			<a
				href="javascript:void(0);"
				data-fancybox-close
				class="btn btn--cancel admin-popup-cancel"
			>
				<?php esc_html_e( 'Cancel', 'north-commerce' ); ?>
			</a>
			<input
				type="submit"
				for="delete_profile_popup"
				class="btn btn--submit admin-popup-submit"
				value="<?php esc_attr_e( 'Add', 'north-commerce' ); ?>"
				disabled
			>
		</div>
	</div>
</form>
