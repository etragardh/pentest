<?php
/*
 * A PHP file for generating a page selectr widget used on our settings page
 */

$published_pages = nc_list_published_pages();

?>
<div class="setting-field">
	<div class="setting-field__left setting-field__left--half-width">
		<label>
			<?= esc_html__($page_name, 'north-commerce')?> Page
		</label>
		<p class="title-info">
			<?= esc_html__( "The $page_name page should contain the shortcode", 'north-commerce' ) ?>
			<span class="inline-block">
				[nc-<?= str_replace('_', '-', $setting_slug)?>]
			</span>
		</p>
	</div>

	<div class="setting-field__right setting-field__right--half-width">
		<?php $page_id = North_Commerce_Settings::nc_get_page_id( $setting_slug ); ?>
		<select id="north_commerce_<?= $setting_slug ?>_page_id"
					name="north_commerce_<?= $setting_slug ?>_page_id"
					class="north-single-select">
			<?php  foreach ( $published_pages as $published_page ) { ?>
				<option value="<?= $published_page->ID ?>"
						<?= $page_id === $published_page->ID ? 'selected' : '' ?>
				>
					<?= esc_html( $published_page->post_title ) ?>
					(ID: <?= $published_page->ID ?>)
				</option>
			<?php } ?>
		</select>
	</div>
</div>
