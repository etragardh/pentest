<?php

$active_icon_name = North_Commerce_Settings::get_menu_cart_icon_name();

$icons = glob( __DIR__ . '/{*,upload/*}.svg', GLOB_BRACE );

if ( ! empty( $filename )  ) {
    $icons = array_reduce( $icons, function ( $icon, $current ) use ( $filename )  {
        if ( basename( $current ) === $filename  ) {
            $icon = array( $current );
        }
        return $icon ?? null;
    } );
}

foreach ( $icons as $key => $icon ) {

    $svg_name = pathinfo( $icon, PATHINFO_FILENAME );
    $id = "menu-cart-icon-$svg_name";

    echo '<input',
        ' id="' . $id . '"',
        ' type="radio"',
        ' name="menu-cart-icon"',
        ' value="' . $svg_name . '"',
        checked( $svg_name === $active_icon_name, true, false ),
        '>';

    echo '<label class="icon-option" for="' . $id . '">',
        file_get_contents( $icon ),
    '</label>';

}
