<?php

defined( 'ABSPATH' ) || exit;

use North_Commerce_Settings as Settings;

/**
 * Order Item template.
 *
 * @package north-commerce/admin/templates/order/list
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com/
 * @since   0.1.0
 * @version 0.1.24
 */

$order = $order ?? $args;

$permalink_params = [
    'page' => 'north-commerce-orders',
    'id' => $order['id'],
];
$permalink = admin_url( 'admin.php?' . http_build_query( $permalink_params, '', '&amp;' ) );

?>
<div
    class="order order__item"
    data-order-id="<?php echo esc_attr( $order['id'] ); ?>"
    data-order-url="<?php echo esc_url( $permalink ); ?>"
>
    <div class="order__select result-col-1">
        <label for="<?php echo esc_attr( 'order-' . $order['id'] ); ?>"></label>
        <input
            type="checkbox"
            name="<?php echo esc_attr( 'order-' . $order['id'] ); ?>"
            id="<?php echo esc_attr( 'order-' . $order['id'] ); ?>"
        >
    </div>

    <div class="order__id result-col-2">
        <span>
            <?php echo esc_html( '#' . $order['order_number'] ); ?>
        </span>
    </div>

    <div class="order__status order__status-<?php echo esc_attr( $order['order_status']['slug'] ); ?> result-col-2">
        <span>
            <?php echo esc_html( $order['order_status']['name'] ); ?>
        </span>
    </div>
    <?php

    $this->template( 'customer-info', 'order', [
        'customer' => $order['customer'],
        'shipping_address' => $order['shipping_address']
    ] );

    ?>
    <div class="order__items result-col-2">
        <?php
        printf(
            _n( '%s item', '%s items', count( $order['line_items'] ), 'north-commerce' ),
            count( $order['line_items'] )
        );
        ?>
    </div>

    <div class="order__total result-col-2">
        <?php
        echo North_Commerce_Settings::formatted_price( $order['total'], false );
        ?>
    </div>

    <div class="order__status order__status-<?php echo esc_attr( $order['payment_status']['slug'] ); ?> result-col-3">
        <span>
            <?php echo esc_html( $order['payment_status']['name'] ); ?>
        </span>
    </div>

    <div class="order__date result-col-3">
        <?php
        echo Settings::formatted_datetime( $order['created'] );
        ?>
    </div>
</div>
