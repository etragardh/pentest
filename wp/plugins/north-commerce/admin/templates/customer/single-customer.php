<?php
/**
 * Customer template.
 *
 *
 * @package north-commerce/admin/templates/customer
 * @link    https://northcommerce.com/
 * @since   0.1.0
 * @version 0.1.25
 */

$template_dir = 'customer/single_customer';

$order_id = $_GET['id'];
$customer_model = new \NorthCommerce\Models\CustomerModel();
$single_customer = $customer_model->get_by_id( $order_id );


do_action( 'north-commerce/customer/single/before' );

if ( $single_customer ) {
	?>
    <main class="main-wrapper single-customer">
        <div class="container">
            <div class="main-upper">
				<?php
				$this->template( 'customer-meta', $template_dir, compact( 'single_customer' ) );
				?>
				<div class="upper-right">
					<?php
					$this->template( 'customer-actions', $template_dir, compact(
                        'single_customer',
                        'customer_model'
                    ) );
					?>
				</div>
            </div>

            <div class="main-part">
                <div class="main-left">
                    <?php
                    $this->template( 'customer-details', $template_dir, compact( 'single_customer' ) );

                    $template = count( $single_customer['orders'] ) ? 'customer-orders' : 'no-order-history';
                    $this->template( $template, $template_dir, compact( 'single_customer' ) );
                    // TODO BELOW
                    // $this->template( 'customer-comments', $template_dir, compact( 'single_customer' ) );
                    ?>
                </div>

                <div class="main-right">
					<?php
					$this->template( 'customer-contact-info', $template_dir, compact( 'single_customer' ) );
					$this->template( 'customer-shipping-info', $template_dir, compact( 'single_customer' ) );
					$this->template( 'customer-billing-info', $template_dir, compact( 'single_customer' ) );
                    // TODO BELOW 
					// $this->template( 'customer-tags', $template_dir, compact( 'single_customer' ) );
					// $this->template( 'request-customer-data', $template_dir, compact( 'single_customer' ) );
					// $this->template( 'erase-customer-data', $template_dir, compact( 'single_customer' ) );
					?>
                </div>
            </div>
        </div>
    </main>
	<?php

} else {

	?>
    <div class="main-wrapper">
        <div class="container">
            <h1> Oops 404 ouch. </h1>
        </div>
    </div>
	<?php

}
