<?php
/*
 * A PHP file for being a base test case for all db tests
 */

use NorthCommerce\Testing\EntityFactory;

require_once(__DIR__ . '/../../north-commerce-test-case.php');

class North_Commerce_Db_Test_Case extends North_Commerce_Test_Case
{
	private $tables_to_cleanup = [];

	public function tablePrefix()
	{
		return North_Commerce_Db_Agent::instance()->schema()->getTablePrefix();
	}

	public function registerTestTable($t)
	{
		$this->tables_to_cleanup[] = $t;
	}

	public function tearDown(): void
    {
		parent::tearDown();
		
        $wpdb = North_Commerce_Db_Agent::instance();

        foreach($this->tables_to_cleanup as $t) {
            $wpdb->query("DROP TABLE $t");
        }
    }

}
