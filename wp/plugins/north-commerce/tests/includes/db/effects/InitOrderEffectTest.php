<?php
/*
 * A PHP file for testing our InitOrderEffect
 */

use NorthCommerce\Db\Collections\OrderStatuses;
use NorthCommerce\Db\Collections\PaymentStatuses;
use NorthCommerce\Db\Effects\InitOrderEffect;

require_once(__DIR__ . '/../North_Commerce_Db_Test_Case.php');

class InitOrderEffectTest  extends North_Commerce_Db_Test_Case
{

	public function testBehavior() {
		$key = nc_random_token();
		$value = nc_random_token();
		$o = InitOrderEffect::run([$key => $value]);
		$this->assertEquals($value, $o[$key]);
		$this->assertEquals(0, $o['total']);
		$this->assertEquals(0, $o['shipping']);
		$this->assertEquals(OrderStatuses::created()->id, $o['order_status_id']);
		$this->assertEquals(PaymentStatuses::unpaid()->id, $o['payment_status_id']);
	}

}
