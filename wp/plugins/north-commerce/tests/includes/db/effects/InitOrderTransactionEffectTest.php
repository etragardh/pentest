<?php
/*
 * A PHP file for making we can create OrderTransactions properly
 */

use NorthCommerce\Db\Collections\OrderTransactionStatuses;
use NorthCommerce\Db\Effects\InitOrderTransactionEffect;

require_once(__DIR__ . '/../North_Commerce_Db_Test_Case.php');

class InitOrderTransactionEffectTest  extends North_Commerce_Db_Test_Case
{

	public function testBehavior()
	{
		$o = $this->ef->randomOrder();

		$values = InitOrderTransactionEffect::run(['order_id' => $o['id']]);

		$this->assertEquals($values['order_transaction_status_id'], OrderTransactionStatuses::building()->id);
		$this->assertEquals($o['total'], $values['amount']);

	}
}
