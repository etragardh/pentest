<?php
// This file handles states, provinces, regions, governorates, emirates, etc for the shipping address form

function renderStateInput( $type = 'select', $address_type = 'shipping', $countries_subunits_map = [], $required = false ) {

	if ( 'select' === $type ) {
		?>
        <select class="nc-input-field__input nc-input-field__input--select"
                data-search="true" <?php echo $required ? ' required ' : '' ?> name="<?php echo $address_type ?>_state"
                data-<?php echo $address_type ?>-state-option-selector
                id="<?php echo $address_type ?>_state"
                autocomplete="on"
                data-tail-skip="1"
        >
			<?php
			foreach ( $countries_subunits_map as $subunit_code => $subunit_name ) { ?>
                <option  value="<?php echo esc_attr( $subunit_code ) ?>">
                    <?php echo esc_html( $subunit_name ) ?>
                </option>

                <?php } ?>
        </select>
		<?php
	} else {
		?>
        <input
            type="hidden"
            name="<?php echo esc_attr( $address_type . '_state' ); ?>"
            id="<?php echo esc_attr( $address_type . '_state' ); ?>"
            class="nc-input-field__input"
            value=""
            >
		<?php
	}
}

?>

<label data-shipping-state-label for="shipping_state" class="nc-input-field__label"><?php echo $warehouse_country_name ?></label>
<?php renderStateInput( $subunits_input_type, 'shipping', $warehouse_country_subunits ?? [], true ); ?>
