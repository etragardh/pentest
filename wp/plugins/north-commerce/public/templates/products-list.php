<?php

defined( 'ABSPATH' ) || exit;

/**
 * Template for Products List.
 *
 * @package north-commerce/public/templates
 * @author  North Commerce <hello@northplugins.com>
 * @since   0.1.5
 * @version 0.1.13
 */


$product_model = new NorthCommerce\Models\ProductModel();
$templates_path = NORTH_COMMERCE_PLUGIN_DIR_PATH . 'public/templates/';
$template = new NorthCommerce\Template_Manager( 'public' );

$options = [
    'limit' => 15,
];

$products = $product_model->list_by_status_name( 'Published', $options );
$all_products_counter = $product_model->count_by_status_name( 'Published' );


?>
<div class="main-wrapper nc-products-list nc-global-styles" data-nc-product-collection-grid>
    <?php

    do_action( 'nc/products-list/before' );

    ?>
    <div class="main-part">
        <div class="main-wrapper">
            <?php

            $template->use( 'products-list/products-filter' );

            ?>
            <div class="main-part">
                <div class="main-right">
                    <?php
                    if ( ! $all_products_counter ) {

                        ?>
                        <h2 class="no-products">
							<?php
                            esc_html_e( 'No products available.', 'north-commerce' );
							?>
                        </h2>
                        <?php

                    } else {

						?>
						<div class="product-upper">

							<p class="products-counter-wrapper">
								<span class="all-products-counter" data-nc-all-products-counter>
									<?php echo esc_html( $all_products_counter ); ?>
								</span>
								<?php esc_html_e( 'products', 'north-commerce' ); ?>
							</p>
							<?php

                            $template->use( 'products-list/sorting-filter' );

							?>
						</div>

                        <div class="product-area">

                            <div class="products-grid columns-3" data-nc-rendered-product-collection>
								<?php

                                $template->use( 'products-list/products-grid', compact( 'products' ) );

								?>
                            </div>

                            <div class="more-product">

                                <p>
									<?php
                                    printf(
                                        'Youâ€™ve viewed <span class="rendered-products-counter">%1$s</span> products of <span class="all-products-counter">%2$s</span> products',
                                        count( $products ),
                                        $all_products_counter
									);
									?>
                                </p>
								<?php

                                if ( $all_products_counter > count( $products ) ) {
									?>
                                    <button class="load-more-button" data-page="1">
										<?php esc_html_e( 'Load', 'north-commerce' ); ?>
										<span class="fetchable">15</span>
										<?php esc_html_e( 'more products', 'north-commerce' ); ?>
                                    </button>
									<?php
                                }

							?>
                            </div>

                        </div>
						<?php
                    }

                    ?>
                </div>
            </div>
        </div>
        <div class="filter-floatingbtn">
            <a href="#">
                <img src="images/filter-floating-btn.png" alt="">
            </a>
        </div>
    </div>
</div>
