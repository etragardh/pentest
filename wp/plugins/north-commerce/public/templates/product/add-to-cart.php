<?php
/**
 * Template for product add to cart button.
 *
 * TODO: Needs to be hooked to JS add to cart method
 *
 * @package north-commerce/public/templates/product
 * @author  North Commerce <hello@northplugins.com>
 * @link    https://northcommerce.com
 * @since   0.1.1
 * @version 0.1.25
 */


$has_product_variants = (bool) $product['has_product_variants'];
$in_stock = is_null( $product['quantity'] ) || intval( $product['quantity'] ) > 0;
$label_add_to_cart = __( 'Add to cart', 'north-commerce' );
$label_select_options = __( 'Select your options', 'north-commerce' );
$label_out_of_stock = __( 'Out of Stock', 'north-commerce' );
$label_invalid_options = __( 'Choose your options', 'north-commerce' );

$label = $has_product_variants
    ? $label_select_options
    : ( $in_stock ? $label_add_to_cart : $label_out_of_stock );

?>
<div class="nc-add-to-cart-container">
    <div class="nc-add-to-cart-error" data-type="nc-add-to-cart-error"></div>
    <div class="nc-btn-container">
        <button
            class="nc-cart-btn nc-cart-btn--block"
            data-enabled-label="<?php echo esc_attr( $label_add_to_cart ); ?>"
            data-disabled-label="<?php echo esc_attr( $label_select_options ); ?>"
            data-out-of-stock-label="<?php echo esc_attr( $label_out_of_stock ); ?>"
            data-invalid-options-label="<?php echo esc_attr( $label_invalid_options ); ?>"
            data-add-to-cart-action
            <?php disabled( $has_product_variants || ! $in_stock ); ?>
        >
			<?php echo $this->use( 'ui/svg/cart' ); ?>
            <span>
                <?php echo esc_html( $label ); ?>
            </span>
        </button>
    </div>
</div>

<div class="nc-join-waitlist hidden">
	<h3>
        <?php esc_html_e( 'These options are not currently available. Would you like to be added to our waitlist?', 'north-commerce' ); ?>
    </h3>
</div>
