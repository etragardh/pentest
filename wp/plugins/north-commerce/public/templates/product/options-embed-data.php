<?php
/*
 * A PHP file for embedding the data associated with all the variants in javascript.
 *
 * This server side generate-and-embed approach was easiest to implement. A dynamic API
 * based version of this may be more efficient in the future.
 */

use NorthCommerce\Models\ProductModel;

$pm = new ProductModel();
$option_values = $pm->getAvailableProductVariantOptionValues($product['id']);
?>
<script>
 document.addEventListener('DOMContentLoaded', function() {
	 window.NorthCommerce.ProductVariantManager.registerOptionValues(<?php echo json_encode($option_values, JSON_PRETTY_PRINT); ?>);
	 window.NorthCommerce.ProductVariantSelectionTracker.showOnlyValidOptions();
 });
</script>
