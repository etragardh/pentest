<?php
/*
 * A PHP file for redirecting users to a named page in the settings
 * section.
 *
 * This is used as a simple example of a redirect handler
 */

namespace NorthCommerce\Redirects;

use Exception;
use North_Commerce_Settings;

class SettingsPageRedirectHandler extends RedirectHandler
{
	public function slug()
	{
		return 'settings_page';
	}

	public function handle($params)
	{
		$target = nc_g($params, 'target');
		if(!$target) {
			throw \Exception("No target page defined");
		}

		$url = North_Commerce_Settings::nc_get_page_url($target);
		if(!$url) {
			throw new Exception("No page for $target found");
		}

		return $url;
	}
}
