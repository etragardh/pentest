<?php

namespace NorthCommerce\Models;

defined('ABSPATH') || exit;

/**
 * Webhook event model.
 *
 * @package north-commerce/includes/models
 * @link    https://northcommerce.com/
 * @since   0.1.10
 * @version 0.1.19
 */
class WebhookEventModel extends BaseModel {

    public function __construct() {
        parent::__construct();
        $this->table = 'webhook_events';
        $this->subtables = [
            'webhook' => 'webhook'
        ];
    }

    public function getExpands() {
        return [];
    }

    /**
     * Register a webhook event
     *
     * @return void
     */
    public function register( $webhook_id, $event ) {
        // Alternate version for managing this - 1. add webhook to webhooks table
        return $this->ea->create($this->table, [
            'webhook_id' => $webhook_id,
            'event' => $event
        ]);
    }

    /**
     * Unregister all events for a given webhook id
     */
    public function unregisterAll( $webhook_id ) {
        return $this->ea->delete( $this->table, [ 'webhook_id' => $webhook_id ] );
    }

}
