<?php
/*
 * A PHP file for implementing common stripe operations
 */
namespace NorthCommerce\Services;

use North_Commerce_Stripe;
use NorthCommerceStripe\StripeClient;

class StripeHelper
{

	public function stripeClient() : StripeClient
	{
		return (new North_Commerce_Stripe())->stripe_client();
	}

	public function stripeCustomerFromCustomer($customer)
	{
		$found = $this->stripeClient()->customers->all([
			'email' => $customer['email']
		]);
		$stripe_c = count($found->data) == 1 ? $found->data[0] : false;
		
		if(!$stripe_c) {
			$stripe_c = $this->stripeClient()->customers->create([
				'email' => $customer['email'],
				'name' => trim($customer['first_name'] . " " . $customer['last_name'])
			]);
		}

		return $stripe_c;

	}

	
	
}
