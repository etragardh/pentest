<?php
/**
 * A PHP file for connecting up API requests to the database
 * with less confusion
 */

class North_Commerce_Api_Db_Helper {

	public function targetTableColumns( $req ) {
		$agent = North_Commerce_Db_Agent::instance();
		$tables = $agent->schema()->getTables();

		$table = $this->targetTable($req);
		if($table) {
			return $tables[$table]['cols'];
		} else {
			return false;
		}
	}

	public function targetTable( $req ) {
		$agent = North_Commerce_Db_Agent::instance();
		$tables = $agent->schema()->getTables();

		$entity = $req->has_param('entity') ?
				  $req->get_param('entity') :
				  ($req->has_param('child') ? $req->get_param('child') : false);
		$table = $agent->entityToTableName($entity);
		return  nc_g($tables, $table) ? $table : false;
	}

}
