<?php
/*
 * A PHP file for representing a list of numbers or words
 */
namespace NorthCommerce\Db\Sql;

class ListValue extends Expression {

	private $value;

	function __construct($value)
	{
		if(!nc_is_seq_array($value)) {
			throw new \Exception("[$value] must be a sequential array.");
		}
		$invalid = array_filter($value,	function($v) {
			return !($v instanceof LiteralValue);
		});

		if($invalid) {
			throw new \Exception("Can only make list values with LiteralValues");
		}
		$this->value = $value;
	}

	function toSql()
	{
		$items = array_map(function($v) {
			return $v->toSql();
		}, $this->value);

		return '(' . implode(',', $items) . ')';
	}
}
