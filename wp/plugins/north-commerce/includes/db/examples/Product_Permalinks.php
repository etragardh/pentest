<?php
/*
 * A PHP file for showing a list sample URls to products
 */

$inputs = [];

$example = function(North_Commerce_Db_Entity_Access $ea) {
	$item_page = get_page_by_path('products');
	$all = $ea->list('products', ['is', 'slug', ['not', null]]);
	return array_reduce($all, function($carry, $p) use($item_page) {
		$url = get_page_link($item_page) . "/" . $p['slug'];
		$key = $p['has_product_variants'] ? 'has_variants' : 'no_variants';
		$carry[$key][] = $url;
		return $carry;
	}, [
		'has_variants' => [],
		'no_variants' => []
	]);
};
