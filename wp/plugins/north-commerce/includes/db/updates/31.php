<?php
/**
 * Update DB Schema to version 31.
 *
 * Add Webhooks table.
 *
 * @since 0.1.21
 */

$prefix_table = function ( string $table_name ) use ( $prefix ): string {
	return "{$prefix}{$table_name}";
};

?>
CREATE TABLE IF NOT EXISTS <?php echo $prefix_table( 'webhooks' ); ?> (
	id BIGINT NOT NULL AUTO_INCREMENT
	, PRIMARY KEY(id)
	, service VARCHAR(255)
	, url VARCHAR(255)
	, uid VARCHAR(255)
	, last_triggered TIMESTAMP NULL
	, created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
	, INDEX(created)
) Engine=Innodb;
