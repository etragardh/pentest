<?php
/*
 * A PHP file for initializing our OrderTransaction to
 * sane state
 */

namespace NorthCommerce\Db\Effects;

use NorthCommerce\Db\Collections\OrderTransactionStatuses;

class InitOrderTransactionEffect extends PreEffect
{

	protected static function behavior($values)
	{
		$o = Effect::$ea->ref($values['order_id']);

		$values['order_transaction_status_id'] = OrderTransactionStatuses::building()->id;
		$values['amount'] = $o['total'];

		return $values;
	}
}
